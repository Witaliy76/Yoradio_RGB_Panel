[English version](README_JC3248W535C_english.md)

### Yoradio для JC3248W535C (AXS15231B QSPI 320x480, 3.5")

1) Как включить плату в проект

- Скопируйте `src/myoptions_JC3248W535C.h` поверх `src/myoptions.h`.
- **ВАЖНО:** В PlatformIO выберите environment `[env:JC3248W535C]` из `platformio.ini` (или универсальный `[env:yoradio-esp32s3]`).
- Затем выполните очистку сборки в `.pioarduino`/PlatformIO (clean), чтобы конфигурация гарантированно применилась.

2) Фото рабочего dev board

<!-- Placeholder for photos - add your photos here -->
- ![photo1_placeholder](https://via.placeholder.com/800x600?text=JC3248W535C+Photo+1)
- ![photo2_placeholder](https://via.placeholder.com/800x600?text=JC3248W535C+Photo+2)

<!-- Uncomment and replace with actual photo URLs when ready:
- ![photo1](URL_TO_PHOTO_1)
- ![photo2](URL_TO_PHOTO_2)
-->

3) Лог изменений

- 23.10.2025 — Первичная версия README для платы JC3248W535C.

4) Особенности и пины

- Дисплей: AXS15231B, 320x480, QSPI интерфейс (4 линии данных: D0-D3)
- Тачскрин: AXS15231B (I2C: SDA=4, SCL=8, INT=3)
- Подсветка: GPIO1 (PWM, стандартная)
- Аудио (I2S): DOUT=41, BCLK=42, LRC=2
- SD-карта (HSPI): CS=10, SCK=12, MISO=13, MOSI=11
- Батарея: ADC=5, делитель напряжения R1=68kΩ, R2=100kΩ, коррекция DELTA_BAT=0.127V
- Свободные пины: зависят от конфигурации (энкодер, кнопки, IR — не задействованы)

Технические характеристики

| Компонент | Характеристики |
|-----------|----------------|
| **Процессор** | ESP32-S3-WROOM-1-N16R8 (240MHz, dual-core) |
| **Память** | 520KB RAM + 16MB PSRAM + 8MB Flash |
| **Дисплей** | AXS15231B QSPI 320x480 (4 линии данных) |
| **Тачскрин** | AXS15231B (I2C: SDA=4, SCL=8, INT=3) |
| **Аудио** | I2S (BCLK=42, LRCLK=2, DOUT=41) |
| **Подсветка** | PWM (GPIO1) |
| **SD карта** | HSPI (CS=10, SCK=12, MISO=13, MOSI=11) |
| **Батарея** | ADC мониторинг (GPIO5, R1=68kΩ, R2=100kΩ) |

Распиновка QSPI дисплея

| Сигнал | GPIO | Назначение |
|--------|------|------------|
| TFT_CS | 45 | Chip Select |
| TFT_RST | -1 | Reset (подключен к EN) |
| TFT_SCK | 47 | Serial Clock / DC |
| TFT_D0 | 21 | QSPI Data 0 |
| TFT_D1 | 48 | QSPI Data 1 |
| TFT_D2 | 40 | QSPI Data 2 |
| TFT_D3 | 39 | QSPI Data 3 |
| GFX_BL | 1 | Backlight (PWM) |

5) Особенности подключения

- Дисплей использует QSPI интерфейс (быстрее стандартного SPI за счет 4 линий данных).
- Подсветка управляется через PWM на GPIO1 (стандартная логика, не инверсная).
- I2S аудио выход на стандартных пинах: DOUT=41, BCLK=42, LRC=2.
- SD-карта подключена через HSPI для избежания конфликтов с дисплеем.

<!-- Placeholder for wiring photos - add photos here if needed -->
<!-- 
- ![wiring1](URL_TO_WIRING_PHOTO_1)
- ![wiring2](URL_TO_WIRING_PHOTO_2)
-->

Батарея

- Встроенный мониторинг напряжения батареи через делитель на GPIO5.
- Делитель: R1=68kΩ (на +), R2=100kΩ (на GND).
- Коррекция показаний: DELTA_BAT=0.127V (настроено для конкретной платы).
- Отображение: уровень заряда (%), напряжение (V), статус зарядки.
- Для отключения мониторинга батареи раскомментируйте `#define BATTERY_OFF` в `myoptions.h`.

Жесты и управление (тачскрин)

- Поддержка тачскрина реализована (AXS15231B, I2C).
- Влево/вправо — изменение громкости
- Вверх/вниз — выбор станции
- Нажатие — старт/стоп
- **Одновременное нажатие двумя пальцами** — переключение SD ⇄ Radio

Статус SD

- Поддержка SD-карты полностью реализована.
- Индексация работает.
- Воспроизведение файлов с SD-карты работает.
- **Двухпальцевый жест** для переключения между Radio и SD режимами.

Spectrum Analyzer

- Встроенный анализатор спектра (15 полос).
- Использует PSRAM для FFT буферов.
- Переключение VU-метр ⇄ Spectrum Analyzer в настройках.

CPU Load Widget

- Виджет загрузки процессора (усреднение по двум ядрам).
- Отображается в режиме плеера.
- Для отключения закомментируйте `#define CPU_LOAD` в `myoptions.h`.

Заключение

- Автор будет благодарен за предложения улучшений, тестирование и pull request.

