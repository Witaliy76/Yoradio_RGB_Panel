# Yoradio –¥–ª—è ESP32 RGB Panel –¥–∏—Å–ø–ª–µ–µ–≤

**–ü—Ä–æ–µ–∫—Ç:** Yoradio –¥–ª—è ESP32-S3 —Å RGB Panel –¥–∏—Å–ø–ª–µ—è–º–∏  
**–í–µ—Ä—Å–∏—è:** v0.9.434(m)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞!

## üéØ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –¥–∏—Å–ø–ª–µ–∏

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ RGB Panel –¥–∏—Å–ø–ª–µ–µ–≤ –Ω–∞ –±–∞–∑–µ ESP32-S3:

### üì± ESP32-4848S040 (ST7701S 480x480 4.0" –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π)
- **–í–µ—Ç–∫–∞:** `4848S040`
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:** 480x480 –ø–∏–∫—Å–µ–ª–µ–π (–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π)
- **–¢–∞—á—Å–∫—Ä–∏–Ω:** GT911 (I2C)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [README.md](README.md) (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

### üì± UEDX48480021-MD80ET (ST7701S 480x480 2.1" –∫—Ä—É–≥–ª—ã–π)
- **–í–µ—Ç–∫–∞:** `UEDX48480021`
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:** 480x480 –ø–∏–∫—Å–µ–ª–µ–π (–∫—Ä—É–≥–ª—ã–π, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å ~400x400)
- **–¢–∞—á—Å–∫—Ä–∏–Ω:** CST826 (I2C)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [README_UEDX48480021.md](README_UEDX48480021.md)

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞ [Yoradio](https://github.com/e2002/yoradio) –¥–ª—è ESP32-S3 –º–æ–¥—É–ª–µ–π —Å **RGB Panel –¥–∏—Å–ø–ª–µ—è–º–∏ ST7701S**:

### –û–±—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:** 480x480 –ø–∏–∫—Å–µ–ª–µ–π
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** RGB Panel (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π, 16 –ª–∏–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö)
- **–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä:** ESP32-S3-WROOM-1-N16R8 (240MHz, dual-core)
- **–ü–∞–º—è—Ç—å:** 520KB RAM + 16MB PSRAM + 8MB Flash
- **–ê—É–¥–∏–æ:** I2S DAC
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:** I2S 3.3.2, Arduino-ESP32 3.x

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥—É–ª–∏:
1. **ESP32-4848S040** - –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –¥–∏—Å–ø–ª–µ–π 4.0", —Ç–∞—á—Å–∫—Ä–∏–Ω GT911
2. **UEDX48480021-MD80ET** - –∫—Ä—É–≥–ª—ã–π –¥–∏—Å–ø–ª–µ–π 2.1", —Ç–∞—á—Å–∫—Ä–∏–Ω CST826

![photo_2025-08-15_00-06-22](https://github.com/user-attachments/assets/bb047124-7e1a-4d0a-8f70-b78dccf4fd36)
*Spectrum Analyzer Mode*

![photo_2025-09-22_20-27-50](https://github.com/user-attachments/assets/b5d05ff3-b0bf-4b8a-866a-7c32e659e3fa)
*VU meter mode* 

## üìù –õ–æ–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**09.10.2025** - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—Ä—É–≥–ª–æ–≥–æ –¥–∏—Å–ø–ª–µ—è UEDX48480021-MD80ET:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –¥–∏—Å–ø–ª–µ–π UEDX48480021 (ST7701S 480x480 2.1" –∫—Ä—É–≥–ª—ã–π)
- ‚úÖ –ü–æ–ª–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –≤—Å–µ—Ö –≤–∏–¥–∂–µ—Ç–æ–≤ –ø–æ–¥ –∫—Ä—É–≥–ª—É—é —Ñ–æ—Ä–º—É –¥–∏—Å–ø–ª–µ—è
- ‚úÖ –°–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π README_UEDX48480021.md —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –±–∞–≥–∏ —Å –æ—á–∏—Å—Ç–∫–æ–π —á–∞—Å–æ–≤ –∏ heapbar –¥–ª—è –≤—Å–µ—Ö –¥–∏—Å–ø–ª–µ–µ–≤
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã myoptions.h
- ‚úÖ –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ RGB Panel –¥–∏—Å–ø–ª–µ–µ–≤

**29.09.2025** 4848S040- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–ø–µ–∫—Ç—Ä-–∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –∏ —Ñ–∏–∫—Å –≤–∏–¥–∂–µ—Ç–∞ –±–∏—Ç—Ä–µ–π—Ç–∞:
- ‚úÖ –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `SpectrumWidgetConfig` –∏–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ `spectrum_st7701.h` –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `displayST7701conf.h`
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ - –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∂–µ—Ç–æ–≤ –¥–∏—Å–ø–ª–µ—è —Ç–µ–ø–µ—Ä—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- ‚úÖ –£–¥–∞–ª–µ–Ω —Ñ–∞–π–ª `spectrum_st7701.h` –∫–∞–∫ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã–π
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `display.cpp` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω —Ñ–∏–∫—Å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞ –±–∏—Ç—Ä–µ–π—Ç–∞ –≤ `widgets.cpp`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—Ü –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–∏—Ç—Ä–µ–π—Ç–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∞ —Ñ–∞–π–ª–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤–∏–¥–∂–µ—Ç–∞
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏—è - –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è autoflush 
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω autoflush –≤ Arduino_RGB_Display –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**12.09.2025** 4848S040- SA ‚Üî VU –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –≤–µ–±–µ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç—Ä–∏—Å–æ–≤–∫–∏:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ç—É–º–±–ª–µ—Ä `spectrum analyzer` –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Settings ‚Üí Screen (—Ä—è–¥–æ–º —Å `numbered playlist`)
- ‚úÖ VU: –∏–Ω–≤–µ—Ä—Å–∏—è —É—Ä–æ–≤–Ω–µ–π –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –ø–æ—Å–ª–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç `fadespeed`), –¥–µ–ª—å—Ç–∞‚Äë–æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –±–µ–∑ —Ñ–ª–∏–∫–µ—Ä–∞,  –∞—É–¥–∏–æ–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤—ã–≤–æ–¥ –¥–ª—è VU.(?)



**09.09.2025** 4848S040- –î–æ–±–∞–≤–∏–ª —Ñ–∞–π–ª—ã bin –¥–ª—è –∑–∞–ª–∏–≤–∫–∏ –≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:
- ‚úÖ bootloader.bin
- ‚úÖ firmware.bin
- ‚úÖ partitions.bin
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–∞—Ç–∞–ª–æ–≥ build_bin/

**03.09.2025** 4848S040- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–∞ –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏ –±—É–∫–≤–∞–º–∏:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è gfxDrawText –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ uppercase
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –≤–∏–¥–∂–µ—Ç—ã (TextWidget, ScrollWidget, NumWidget, BitrateWidget)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –¥–∏—Å–ø–ª–µ–µ ST7701 (–¥–∞—Ç–∞, –≤—Ä–µ–º—è, –ø–ª–µ–π–ª–∏—Å—Ç)
- ‚úÖ –û–±–µ—Å–ø–µ—á–µ–Ω–æ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–ª–µ–π–ª–∏—Å—Ç–∞
- ‚úÖ –¢–µ–∫—Å—Ç —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**03.09.2025** 4848S040 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—Å–∏ —Ç–∞—á—Å–∫—Ä–∏–Ω–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å—Ç–∞–Ω—Ü–∏–π:
- ‚úÖ –°–≤–∞–π–ø –≤–≤–µ—Ä—Ö ‚Üí —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç–∞–Ω—Ü–∏—è
- ‚úÖ –°–≤–∞–π–ø –≤–Ω–∏–∑ ‚Üí –ø—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç–∞–Ω—Ü–∏—è
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–≤–∞–π–ø–æ–≤

**02.09.2025** 4848S040 - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SD –∫–∞—Ä—Ç—ã:
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SPI –¥–ª—è SD –∫–∞—Ä—Ç—ã (FSPI/SPI2_HOST)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω deadlock –≤ mutex –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ `_checkNoMedia()`
- ‚úÖ SD –∫–∞—Ä—Ç–∞ —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ –ü–ª–µ–π–ª–∏—Å—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —á–∏—Ç–∞–µ—Ç—Å—è
- ‚úÖ –°–ø–∏—Å–æ–∫ –∫–æ–º–ø–æ–∑–∏—Ü–∏–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏ –ª–∏—Å—Ç–∞–µ—Ç—Å—è
- ‚ùå **–ü–†–û–ë–õ–ï–ú–ê:** –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≤–∏—Å–∞–µ—Ç –≤ `config.loadStation()`

**–°–º. [ISSUE: SD Card Playback Problem](#-sd-card-playback-issue)**

> **‚ö†Ô∏è –í–ê–ñ–ù–û:** –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ä–∞–¥–∏–æ –Ω–∞ –±–æ–ª—å—à–∏—Ö –±–∏—Ç—Ä–µ–π—Ç–∞—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ IDF –Ω–∞ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏. –°–º. —Ä–∞–∑–¥–µ–ª [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫).




## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í—ã–±–æ—Ä –¥–∏—Å–ø–ª–µ—è:
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ `src/myoptions.h`:
- –î–ª—è **ESP32-4848S040**: `cp src/myoptions_4848S040.h src/myoptions.h`
- –î–ª—è **UEDX48480021**: `cp src/myoptions_UEDX48480021.h src/myoptions.h`

## üöÄ –û–±—â–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

- ‚úÖ **ST7701S RGB Panel 480x480** - –≤—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –æ–±–æ–∏—Ö –¥–∏—Å–ø–ª–µ–µ–≤
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–∏—Å–ø–ª–µ–µ–≤** - –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π 4.0" –∏ –∫—Ä—É–≥–ª—ã–π 2.1"
- ‚úÖ **–°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ VU-–º–µ—Ç—Ä ‚Üî SA –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ **–†—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ **WiFi –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ä–∞–¥–∏–æ** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è ESP32-S3** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ **–¢–∞—á—Å–∫—Ä–∏–Ω** - GT911 (4848S040) –∏–ª–∏ CST826 (UEDX48480021)
- ‚úÖ **–≠–Ω–∫–æ–¥–µ—Ä** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

## üîß –°–±–æ—Ä–∫–∞

–î–ª—è —Ä—É—Å—Å–∫–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–º–µ–Ω—è–µ–º —Ñ–∞–π–ª fonts/glcdfont.h –ø–æ –∞–¥—Ä–µ—Å—É: pio\libdeps\yoradio-esp32s3\GFX Library for Arduino\src\font


## üì± –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **`src/myoptions.h`** - –∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª (–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∏–∑ myoptions_XXX.h)
- **`src/myoptions_4848S040.h`** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è ESP32-4848S040
- **`src/myoptions_UEDX48480021.h`** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è UEDX48480021-MD80ET
- **`src/mytheme.h`** - —Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –§–∞–π–ª—ã –¥–∏—Å–ø–ª–µ–µ–≤:
- **`src/src/displays/displayST7701.cpp`** - –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è ESP32-4848S040
- **`src/src/displays/displayUEDX48480021.cpp`** - –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è UEDX48480021
- **`src/src/displays/conf/displayST7701conf.h`** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤ 4848S040
- **`src/src/displays/conf/displayUEDX48480021conf.h`** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤ UEDX48480021

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫

–î–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –∑–∞–∏–∫–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ä–∞–¥–∏–æ –Ω–∞ –±–æ–ª—å—à–∏—Ö –±–∏—Ç—Ä–µ–π—Ç–∞—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ IDF –Ω–∞ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏:

### üìÅ –ó–∞–º–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫

1. **–ù–∞–π–¥–∏—Ç–µ –ø–∞–ø–∫—É PlatformIO:**
   ```
   <user>/.platformio/packages/framework-arduinoespressif32-libs/esp32s3/lib/
   ```

2. **–ó–∞–º–µ–Ω–∏—Ç–µ —Ñ–∞–π–ª—ã:**
   - `libesp_netif.a` ‚Üí `libesp_netif.a` (–∏–∑ –∞—Ä—Ö–∏–≤–∞)
   - `liblwip.a` ‚Üí `liblwip.a` (–∏–∑ –∞—Ä—Ö–∏–≤–∞)

3. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–µ—Ä—Å–∏–∏ IDF:**
   - ‚úÖ ESP-IDF 5.4
   - ‚úÖ ESP-IDF 5.5

### üì¶ –ê—Ä—Ö–∏–≤ —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏

–ü–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `library!/esp32s3_5.4/`:
- `libesp_netif.a` (496KB)
- `liblwip.a` (3.8MB)

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã –±–∏–±–ª–∏–æ—Ç–µ–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ PlatformIO –∏ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç.

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

- **–û–¥–∏–Ω–æ—á–Ω–æ–µ –∫–∞—Å–∞–Ω–∏–µ** - —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø
- **–°–≤–∞–π–ø –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç–∏ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
- **–°–≤–∞–π–ø –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑** - –≤—ã–±–æ—Ä —Å—Ç–∞–Ω—Ü–∏–∏ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
- **–î–≤–æ–π–Ω–æ–µ –∫–∞—Å–∞–Ω–∏–µ** - —Å–º–µ–Ω–∞ —Ä–µ–∂–∏–º–∞ (RADIO ‚Üî SD)
- **–≠–Ω–∫–æ–¥–µ—Ä** - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç—å—é

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∏—Å–ø–ª–µ–µ–≤

| –ü–∞—Ä–∞–º–µ—Ç—Ä | ESP32-4848S040 | UEDX48480021-MD80ET |
|----------|----------------|---------------------|
| **–†–∞–∑–º–µ—Ä** | 4.0" –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π | 2.1" –∫—Ä—É–≥–ª—ã–π |
| **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ** | 480x480 | 480x480 (~400x400 —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ) |
| **–¢–∞—á—Å–∫—Ä–∏–Ω** | GT911 (SDA:19, SCL:45) | CST826 (SDA:16, SCL:15) |
| **I2S –ø–∏–Ω—ã** | DOUT:40, BCLK:1, LRC:2 | DOUT:43, BCLK:44, LRC:4 |
| **–ü–æ–¥—Å–≤–µ—Ç–∫–∞** | GPIO38 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è) | GPIO7 (Active LOW) |
| **–≠–Ω–∫–æ–¥–µ—Ä** | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π | GPIO 0, 5, 6 |
| **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏** | SD –∫–∞—Ä—Ç–∞ | –¢—Ä–µ–±—É–µ—Ç —É–¥–∞–ª–µ–Ω–∏—è C9 |
| **–§–æ—Ä–º–∞—Ç** | RGB565 (16-bit) | RGB565 (16-bit, BGR swap) |

## üîç –û—Ç–ª–∞–¥–∫–∞

```cpp
// –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É –¥–∏—Å–ø–ª–µ—è
#define DEBUG_DISPLAY

// –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É —Ç–∞—á—Å–∫—Ä–∏–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
#define DEBUG_TOUCH
```

4848S040: –ü–æ—Ä—è–¥–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è DAC –∫ —Ä–∞–∑—ä–µ–º—É:
![S3c5b9bd4f2a54006af227f2b4acd0fc1b](https://github.com/user-attachments/assets/c49b36b6-3b10-4db5-ad03-bf7ecc4aca3d)

![photo_2025-09-09_19-40-49](https://github.com/user-attachments/assets/e45c9c79-ed04-4fc9-8e6e-d9d97bda08d4)

–≤ –º–æ–¥—É–ª–µ –µ—Å—Ç—å –≤—Å—Ç—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–æ DAC. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á–µ–Ω - –ø–∏–Ω—ã –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω—ã –Ω–∞ –∑–∞–¥–Ω–∏–π —Ä–∞–∑—ä–µ–º. 
–î–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥—É–ª—è –Ω–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π DAC - –∑–∞–ø–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º—ã—á–∫–∏ R21, R22, R23. 
–ï—Å–ª–∏, –ø—Ä–∏ —ç—Ç–æ–º, –∑–∞–¥–Ω–∏–º —Ä–∞–∑—å–µ–º–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–µ –±—É–¥–µ—Ç–µ - —Ç–æ —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã R26, R27, R25 –º–æ–∂–Ω–æ –Ω–µ —É–±–∏—Ä–∞—Ç—å.. –∏–Ω–∞—á–µ –∏—Ö –Ω—É–∂–Ω–æ –≤—ã–ø–∞—è—Ç—å


![photo_2025-09-09_19-57-01](https://github.com/user-attachments/assets/2abafab0-3ece-4569-8181-4b2ded7a6a62)



## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã 4848S040

- ‚ùå **SD –∫–∞—Ä—Ç–∞: –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** (—Å–º. —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ)


## üö® SD Card Playback Issue

### Problem Description
SD card integration works perfectly for indexing and playlist reading during boot/initialization, but **hangs during audio playback** when user presses Play button.

### Specific Failure Point
The system hangs in `config.loadStation()` function when attempting to open SD card files:
```cpp
File playlist = SDPLFS()->open(REAL_PLAYL, "r");  // ‚Üê HANGS HERE
File index = SDPLFS()->open(REAL_INDEX, "r");     // ‚Üê NEVER REACHED
```

### Working Scenarios
- ‚úÖ SD card initialization and mounting
- ‚úÖ SD card indexing (creates playlistsd.csv and indexsd.dat)
- ‚úÖ Playlist reading during boot sequence
- ‚úÖ All cardPresent() checks pass
- ‚úÖ File existence checks pass

### Failing Scenario
- ‚ùå Audio playback when user presses Play button
- ‚ùå System hangs on SDPLFS()->open() calls in loadStation()

### Technical Details
- **Board:** ESP32-S3 N16R8
- **Display:** ST7701 RGB 480x480 (uses VSPI)
- **SD Card:** FSPI (SPI2_HOST) with custom pins: CS=42, SCK=48, MISO=41, MOSI=47
- **Audio:** I2S (no SPI conflict)
- **FreeRTOS:** mutex system implemented for thread safety

### Attempted Solutions
1. Changed SD card SPI from FSPI to HSPI - no effect
2. Added mutex timeouts and forced release - no effect
3. Simplified cardPresent() check (removed readRAW) - no effect
4. Suspended display task during SD access - no effect
5. Removed all SD state checks - still hangs on file open

### Root Cause Hypothesis
The issue appears to be in the SD card file system layer (SDPLFS()->open()) rather than SPI communication or mutex management. The same SD card operations work fine during boot but fail during runtime playback context.

### Developer Request
If you can identify why SDPLFS()->open() works during boot but hangs during playback, please help resolve this issue. The SD card hardware and basic file operations are confirmed working.

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE)

---



